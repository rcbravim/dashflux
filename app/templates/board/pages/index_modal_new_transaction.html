<div class='modal fade newEntryModal' id='newEntryModal' tabindex='-1' role='dialog' aria-hidden='true'>
    <div class='modal-dialog modal-dialog-centered modal-lg' role='document'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h5 class='modal-title'>Adicionar Nova Entrada</h5>
                <button type='button' class='btn-close' data-bs-dismiss='modal' aria-label='Close'></button>
            </div>
            <form class='needs-validation' action="{{ url_for('board.index') }}" novalidate method='post'>
                {{ csrf_token }}
                <input type='hidden' name='m' value='{{ context.filter.month }}'/>
                <input type='hidden' name='y' value='{{ context.filter.year }}'/>
                <div class='modal-body'>
                    <div class='content mt-1'>
                        <div class='row'>
                            <div class='col-lg-6'>
                                <div class='mb-3'>
                                    <label for='entry_date' class='form-label'>Data de Entrada<span class='text-danger'>*</span></label>
                                    <input type='date' class='form-control valid_date' id='entry_date' name='entry_date'
                                           value='{{ context.filter.new_entry_date }}' required>
                                    <div class='invalid-feedback'>Por favor ensira a data de entrada</div>
                                </div>
                            </div>
                            <div class='col-lg-6'>
                                <div class='mb-3'>
                                    <label for='category' class='form-label'>Categoria<span class='text-danger'>*</span></label>
                                    <select class='form-select modal_category_new' id='category' name='category' required>

                                        {% if context.categories %}
                                            {% for row in context.categories %}
                                                {% if row.id == 1 %}
                                                <option value='{{ row.id }}' selected>{{ row.cat_name }}</option>
                                                {% else %}
                                                <option value='{{ row.id }}'>{{ row.cat_name }}</option>
                                                {% endif %}
                                            {% endfor %}
                                        {% else %}
                                            <option value='' selected disabled>Registre uma categoria antes de continuar</option>
                                        {% endif %}
                                    </select>
                                    <div class='invalid-feedback'>Selecione uma categoria</div>
                                </div>
                            </div>
                        </div>

                        <div class='row'>
                            <div class='col-lg-12'>
                                <div class='mb-3'>
                                    <label for='description' class='form-label'>Descrição | Observações</label>
                                    <input type='text' class='form-control valid_opt_entry' id='description'
                                           name='description'
                                           placeholder='Insira suas Observações' maxlength='128'>
                                    <div class='invalid-feedback'></div>
                                </div>
                            </div>
                        </div>
                        <div class='row'>
                            <div class='col-lg-6'>
                                <div class='mb-3'>
                                    <label for='establishment' class='form-label'>Estabelecimento<span
                                            class='text-danger'>*</span></label>
                                    <select class='form-select' id='establishment' name='establishment' required>
                                        {% if context.establishments %}
                                        {% for row in context.establishments %}

                                        {% if row.id == 1 %}
                                        <option value='{{ row.id }}' selected>{{ row.est_name }}</option>
                                        {% else %}
                                        <option value='{{ row.id }}'>{{ row.est_name }}</option>
                                        {% endif %}
                                        {% endfor %}
                                        {% else %}
                                        <option value='' selected disabled>Registre um estabelecimento antes de
                                            continuar
                                        </option>
                                        {% endif %}
                                    </select>
                                    <div class='invalid-feedback'>Selecione um estabelecimento, mesmo que seja você
                                        mesmo
                                    </div>
                                </div>
                            </div>
                            <div class='col-lg-6'>
                                <div class='mb-3'>
                                    <label for='account' class='form-label'>Conta<span
                                            class='text-danger'>*</span></label>
                                    <select class='form-select' id='account' name='account' required>
                                        {% if context.accounts %}
                                            {% for row in context.accounts %}

                                                {% if row.id == 1 %}
                                                    <option value='{{ row.id }}' selected>{{ row.acc_name|upper }}</option>

                                                {% else %}
                                                <option value='{{ row.id }}'>{{ row.acc_name|upper }}</option>
                                                {% endif %}

                                            {% endfor %}
                                        {% else %}
                                            <option value='' selected disabled>Registre uma conta antes de continuar</option>
                                        {% endif %}
                                    </select>
                                    <div class='invalid-feedback'>Selecione uma conta, mesmo que seja em dinheiro</div>
                                </div>
                            </div>
                        </div>
                        <div class='row'>
                            <div class='col-lg'>
                                <div class='mb-3'>
                                    <label for='type_transaction' class='form-label'>Tipo<span
                                            class='text-danger'>*</span></label>
                                    <select class='form-select' id='type_transaction' name='type_transaction'>
                                        <option value='1'>Entrada</option>
                                        <option value='2' selected>Saída</option>
                                    </select>
                                </div>
                            </div>
                            <div class='col-lg'>
                                <div class='mb-3'>
                                    <label for='situation' class='form-label'>Estado<span
                                            class='text-danger'>*</span></label>
                                    <select class='form-select' id='situation' name='situation'>
                                        {% if context.filter.new_entry_date <= date_now() %}
                                        <option value='1' selected>Pago</option>
                                        <option value='2'>Aberto</option>
                                        <option value='3'>Em Negociação</option>
                                        <option value='4'>Recebido</option>
                                        <option value='5'>Agendado</option>
                                        {% else %}
                                        <option value='2'>Aberto</option>
                                        <option value='3'>Em Negociação</option>
                                        <option value='4'>Recebido</option>
                                        <option value='5' selected>Agendado</option>
                                        {% endif %}
                                    </select>
                                </div>
                            </div>
                            <div class='col-lg'>
                                <div class='mb-3'>
                                    <label for='amount' class='form-label'>Quantia<span
                                            class='text-danger'>*</span></label>
                                    <input type='text' class='form-control mask_money' id='amount' name='amount'
                                           placeholder='Digite o valor da entrada' required>
                                    <div class='invalid-feedback'>Digite o valor da entrada</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class='modal-footer'>
                    <button type='submit' class='btn btn-primary'>Adicionar Entrada</button>
                </div>
            </form>
        </div>
    </div>
</div>